\hypertarget{control_8cpp}{}\doxysection{src/control.cpp File Reference}
\label{control_8cpp}\index{src/control.cpp@{src/control.cpp}}


Node for robot control.  


{\ttfamily \#include \char`\"{}ros/ros.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}final\+\_\+srv/\+Callbacks\+\_\+srv.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}geometry\+\_\+msgs/\+Twist.\+h\char`\"{}}\newline
Include dependency graph for control.\+cpp\+:
\nopagebreak
\begin{figure}[H]
\begin{center}
\leavevmode
\includegraphics[width=350pt]{control_8cpp__incl}
\end{center}
\end{figure}
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
void \mbox{\hyperlink{control_8cpp_a928e32686c7e00c1ecde24c3da3019f7}{drive}} ()
\item 
void \mbox{\hyperlink{control_8cpp_a463e9c08d16d29d4ba8c13ab5aef28e0}{keyboard\+\_\+drive}} ()
\item 
int \mbox{\hyperlink{control_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}{main}} (int argc, char $\ast$$\ast$argv)
\end{DoxyCompactItemize}
\doxysubsection*{Variables}
\begin{DoxyCompactItemize}
\item 
\mbox{\Hypertarget{control_8cpp_ac0664a23d360105ec3d579965d5b7631}\label{control_8cpp_ac0664a23d360105ec3d579965d5b7631}} 
ros\+::\+Publisher \mbox{\hyperlink{control_8cpp_ac0664a23d360105ec3d579965d5b7631}{pub\+\_\+vel}}
\begin{DoxyCompactList}\small\item\em Publisher to /cmd\+\_\+vel topic. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{control_8cpp_a17bcd065930a8a7f9f194078d9977268}\label{control_8cpp_a17bcd065930a8a7f9f194078d9977268}} 
ros\+::\+Service\+Client \mbox{\hyperlink{control_8cpp_a17bcd065930a8a7f9f194078d9977268}{client}}
\begin{DoxyCompactList}\small\item\em Client to /service custom service. \end{DoxyCompactList}\item 
\mbox{\Hypertarget{control_8cpp_a35189ff8bd423937096fab144f74e980}\label{control_8cpp_a35189ff8bd423937096fab144f74e980}} 
final\+\_\+srv\+::\+Callbacks\+\_\+srv \mbox{\hyperlink{control_8cpp_a35189ff8bd423937096fab144f74e980}{var}}
\begin{DoxyCompactList}\small\item\em Variable used to pass data between nodes with the custom service. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Node for robot control. 

\begin{DoxyAuthor}{Author}
Aurora Durante 
\end{DoxyAuthor}
\begin{DoxyVersion}{Version}
1.\+0 
\end{DoxyVersion}
\begin{DoxyDate}{Date}
04/02/2022
\end{DoxyDate}

\begin{DoxyParams}[1]{Parameters}
\mbox{\texttt{ in}}  & {\em frame\+\_\+id} & Define position of goal frame \\
\hline
\mbox{\texttt{ in}}  & {\em w} & Define porientation of goal frame\\
\hline
\end{DoxyParams}
Publishes to\+: ~\newline
 °/cmd\+\_\+vel Services\+: ~\newline
 °/service

Description\+: This node lets the robot move in the environment with respect to which modality the user chooses. In any case velocity inputs are published in the topic so that the robot can move. 

\doxysubsection{Function Documentation}
\mbox{\Hypertarget{control_8cpp_a928e32686c7e00c1ecde24c3da3019f7}\label{control_8cpp_a928e32686c7e00c1ecde24c3da3019f7}} 
\index{control.cpp@{control.cpp}!drive@{drive}}
\index{drive@{drive}!control.cpp@{control.cpp}}
\doxysubsubsection{\texorpdfstring{drive()}{drive()}}
{\footnotesize\ttfamily void drive (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Autonomously moving in the environment 
\begin{DoxyParams}{Parameters}
{\em min\+\_\+th} & defines the threshold distance before that the robot collides with some obstacle \\
\hline
{\em vel} & defines the linear or angular velocity to publish with respct to where the obstacles are\\
\hline
\end{DoxyParams}
In this function the robot moves in the environment while avoiding obstacles\+: if there is an obstacle in front of, on the right or on the left, the robot turns in such a way to avoid it.\mbox{\Hypertarget{control_8cpp_a463e9c08d16d29d4ba8c13ab5aef28e0}\label{control_8cpp_a463e9c08d16d29d4ba8c13ab5aef28e0}} 
\index{control.cpp@{control.cpp}!keyboard\_drive@{keyboard\_drive}}
\index{keyboard\_drive@{keyboard\_drive}!control.cpp@{control.cpp}}
\doxysubsubsection{\texorpdfstring{keyboard\_drive()}{keyboard\_drive()}}
{\footnotesize\ttfamily void keyboard\+\_\+drive (\begin{DoxyParamCaption}{ }\end{DoxyParamCaption})}

Moving with user inputs 
\begin{DoxyParams}{Parameters}
{\em vel} & defines the linear or angular velocity to publish with respct to user inputs \\
\hline
{\em dir} & defines the input command of the user\\
\hline
\end{DoxyParams}
In this function user drives the robot in the environment by keyboard command\+: by pressing \textquotesingle{}u\textquotesingle{} it turns left, by pressing \textquotesingle{}i\textquotesingle{} it gos foward, by pressing \textquotesingle{}o\textquotesingle{} it turns right and by pressing \textquotesingle{}k\textquotesingle{} it stops. A linear/angular velocity is published accordingl to input command.\mbox{\Hypertarget{control_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}\label{control_8cpp_a3c04138a5bfe5d72780bb7e82a18e627}} 
\index{control.cpp@{control.cpp}!main@{main}}
\index{main@{main}!control.cpp@{control.cpp}}
\doxysubsubsection{\texorpdfstring{main()}{main()}}
{\footnotesize\ttfamily int main (\begin{DoxyParamCaption}\item[{int}]{argc,  }\item[{char $\ast$$\ast$}]{argv }\end{DoxyParamCaption})}

Main function of the node 
\begin{DoxyParams}{Parameters}
{\em argc} & is input of the node \\
\hline
{\em argv} & is input of the node\\
\hline
\end{DoxyParams}
In this main function the node is initialized and setted to handle communication with R\+OS system. It also defines the publishers and clients needed for this node and it chooses the control modality to use accordingly to m1 and m2 values.